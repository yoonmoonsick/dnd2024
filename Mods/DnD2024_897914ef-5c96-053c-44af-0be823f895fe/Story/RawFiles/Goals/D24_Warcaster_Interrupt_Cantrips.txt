Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
// Booming Blade
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_BoomingBlade_ClassSpell", 1)
THEN
ApplyStatus(_Player, "WARCASTER_BOOMINGBLADE", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_BoomingBlade_ClassSpell", 0)
THEN
RemoveStatus(_Player, "WARCASTER_BOOMINGBLADE", _Player);


// ChillTouch
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_ChillTouch", 1)
THEN
ApplyStatus(_Player, "WARCASTER_CHILLTOUCH", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_ChillTouch", 0)
THEN
RemoveStatus(_Player, "WARCASTER_CHILLTOUCH", _Player);


// Concussion
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_Concussion", 1)
THEN
ApplyStatus(_Player, "WARCASTER_VICIOUSMOCKERY", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_Concussion", 0)
THEN
RemoveStatus(_Player, "WARCASTER_VICIOUSMOCKERY", _Player);


// FireBolt
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Projectile_FireBolt", 1)
THEN
ApplyStatus(_Player, "WARCASTER_FIREBOLT", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Projectile_FireBolt", 0)
THEN
RemoveStatus(_Player, "WARCASTER_FIREBOLT", _Player);


// Green-Flame Blade
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_GreenFlameBlade", 1)
THEN
ApplyStatus(_Player, "WARCASTER_GREENFLAMEBLADE", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_GreenFlameBlade", 0)
THEN
RemoveStatus(_Player, "WARCASTER_GREENFLAMEBLADE", _Player);


// Lightning Lure
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_LightningLure", 1)
THEN
ApplyStatus(_Player, "WARCASTER_LIGHTNINGLURE", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_LightningLure", 0)
THEN
RemoveStatus(_Player, "WARCASTER_LIGHTNINGLURE", _Player);


// Mind Sliver
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_MindSliver", 1)
THEN
ApplyStatus(_Player, "WARCASTER_MINDSLIVER", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_MindSliver", 0)
THEN
RemoveStatus(_Player, "WARCASTER_MINDSLIVER", _Player);


// Poison Spray
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Projectile_PoisonSpray", 1)
THEN
ApplyStatus(_Player, "WARCASTER_POISONSPRAY", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Projectile_PoisonSpray", 0)
THEN
RemoveStatus(_Player, "WARCASTER_POISONSPRAY", _Player);


// PrimalSavagery
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_PrimalSavagery", 1)
THEN
ApplyStatus(_Player, "WARCASTER_PRIMALSAVAGERY", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_PrimalSavagery", 0)
THEN
RemoveStatus(_Player, "WARCASTER_PRIMALSAVAGERY", _Player);


// Produce Flame
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Shout_ProduceFlame", 1)
THEN
ApplyStatus(_Player, "WARCASTER_PRODUCEFLAME", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Shout_ProduceFlame", 0)
THEN
RemoveStatus(_Player, "WARCASTER_PRODUCEFLAME", _Player);


// RayOfFrost
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Projectile_RayOfFrost", 1)
THEN
ApplyStatus(_Player, "WARCASTER_RAYOFFROST", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Projectile_RayOfFrost", 0)
THEN
RemoveStatus(_Player, "WARCASTER_RAYOFFROST", _Player);


// SacredFlame
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_SacredFlame", 1)
THEN
ApplyStatus(_Player, "WARCASTER_SACREDFLAME", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_SacredFlame", 0)
THEN
RemoveStatus(_Player, "WARCASTER_SACREDFLAME", _Player);


// ShockingGrasp
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_ShockingGrasp", 1)
THEN
ApplyStatus(_Player, "WARCASTER_SHOCKINGGRASP", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_ShockingGrasp", 0)
THEN
RemoveStatus(_Player, "WARCASTER_SHOCKINGGRASP", _Player);


// StarryWisp
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Projectile_StarryWisp", 1)
THEN
ApplyStatus(_Player, "WARCASTER_STARRYWISP", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Projectile_StarryWisp", 0)
THEN
RemoveStatus(_Player, "WARCASTER_STARRYWISP", _Player);


// ThornWhip
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_ThornWhip", 1)
THEN
ApplyStatus(_Player, "WARCASTER_THORNWHIP", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_ThornWhip", 0)
THEN
RemoveStatus(_Player, "WARCASTER_THORNWHIP", _Player);


// TollTheDead
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_TollTheDead", 1)
THEN
ApplyStatus(_Player, "WARCASTER_TOLLTHEDEAD", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_TollTheDead", 0)
THEN
RemoveStatus(_Player, "WARCASTER_TOLLTHEDEAD", _Player);


// TrueStrike
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_TrueStrike", 1)
THEN
ApplyStatus(_Player, "WARCASTER_TRUESTRIKE", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_TrueStrike", 0)
THEN
RemoveStatus(_Player, "WARCASTER_TRUESTRIKE", _Player);


// VengefulBlade
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_VengefulBlade", 1)
THEN
ApplyStatus(_Player, "WARCASTER_VENGEFULBLADE", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_VengefulBlade", 0)
THEN
RemoveStatus(_Player, "WARCASTER_VENGEFULBLADE", _Player);


// ViciousMockery
IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_ViciousMockery", 1)
THEN
ApplyStatus(_Player, "WARCASTER_VICIOUSMOCKERY", -1.0, 1, _Player);

IF
EnteredCombat(_Player, _CombatID)
AND
DB_Players((CHARACTER)_Player)
AND
HasPassive(_Player,"WarCaster_OpportunitySpell",1)
AND
IsSpellActive(_Player, "Target_ViciousMockery", 0)
THEN
RemoveStatus(_Player, "WARCASTER_VICIOUSMOCKERY", _Player);
EXITSECTION

ENDEXITSECTION
